# Landing Pages Automation v2 - Fullstack Architecture Document

## Table of Contents

- [Landing Pages Automation v2 - Fullstack Architecture Document](#table-of-contents)
  - [Change Log](./change-log.md)
  - [Table of Contents](./table-of-contents.md)
  - [Project Context](./project-context.md)
  - [Starter Template or Existing Project](./starter-template-or-existing-project.md)
  - [Architectural Style](./architectural-style.md)
  - [Key Architectural Decisions (from Elicitation Analysis)](./key-architectural-decisions-from-elicitation-analysis.md)
    - [Critical Risks Mitigated:](./key-architectural-decisions-from-elicitation-analysis.md#critical-risks-mitigated)
    - [Best Practices Applied:](./key-architectural-decisions-from-elicitation-analysis.md#best-practices-applied)
    - [Optimization Priorities:](./key-architectural-decisions-from-elicitation-analysis.md#optimization-priorities)
  - [Technology Constraints](./technology-constraints.md)
  - [ADR Structure (40 Total)](./adr-structure-40-total.md)
  - [Success Criteria](./success-criteria.md)
  - [Technical Summary](./technical-summary.md)
  - [Platform and Infrastructure Choice](./platform-and-infrastructure-choice.md)
  - [Reference Implementation Study](./reference-implementation-study.md)
    - [Next.js 15 + Netlify Examples](./reference-implementation-study.md#reference-implementations)
    - [Configuration Validation](./reference-implementation-study.md#validated-configuration)
  - [Repository Structure](./repository-structure.md)
  - [Overview](./overview.md)
  - [Frontend Technologies](./frontend-technologies.md)
    - [Next.js 15 (App Router)](./frontend-technologies.md#nextjs-15-app-router)
    - [React 19](./frontend-technologies.md#react-19)
    - [TypeScript](./frontend-technologies.md#typescript)
    - [Tailwind CSS v4.0](./frontend-technologies.md#tailwind-css-v40)
  - [Build-Time Technologies](./build-time-technologies.md)
    - [Sharp (Image Optimization)](./build-time-technologies.md#sharp-image-optimization)
    - [Beasties (Critical CSS Extraction)](./build-time-technologies.md#beasties-critical-css-extraction)
  - [External Services & APIs](./external-services-apis.md)
    - [Airtable SDK](./external-services-apis.md#airtable-sdk)
    - [Airtable REST API (Direct Integration)](./external-services-apis.md#airtable-rest-api-direct-integration)
    - [Anthropic Claude API](./external-services-apis.md#anthropic-claude-api)
    - [Make.com Webhook](./external-services-apis.md#makecom-webhook)
  - [Analytics & Tracking](./analytics-tracking.md)
    - [Google Tag Manager (GTM)](./analytics-tracking.md#google-tag-manager-gtm)
    - [CallRail Dynamic Number Insertion](./analytics-tracking.md#callrail-dynamic-number-insertion)
    - [Google Analytics 4 (GA4)](./analytics-tracking.md#google-analytics-4-ga4)
  - [Development Tools](./development-tools.md)
    - [ESLint + Prettier](./development-tools.md#eslint-prettier)
    - [Playwright (E2E Testing)](./development-tools.md#playwright-e2e-testing)
  - [Environment Variables](./environment-variables.md)
  - [Technology Decision Summary](./technology-decision-summary.md)
  - [Migration Priority](./migration-priority.md)
    - [üö® Critical (Before Implementation):](./migration-priority.md#critical-before-implementation)
    - [‚ö†Ô∏è High Priority (Before Production):](./migration-priority.md#high-priority-before-production)
    - [‚úÖ Medium Priority (Recommended):](./migration-priority.md#medium-priority-recommended)
  - [Updated package.json Dependencies](./updated-packagejson-dependencies.md)
  - [Data Models](./data-models.md)
    - [Overview](./data-models.md#overview)
    - [1. Airtable Data Model](./data-models.md#1-airtable-data-model)
      - [Table Structure Overview](./data-models.md#table-structure-overview)
      - [Detailed Table Specifications](./data-models.md#detailed-table-specifications)
    - [2. Static JSON Data Model](./data-models.md#2-static-json-data-model)
      - [Schema: ](./data-models.md#schema)
    - [3. Form Submission Data Model](./data-models.md#3-form-submission-data-model)
      - [Schema: Form Payload (Client ‚Üí Make.com)](./data-models.md#schema-form-payload-client-makecom)
    - [4. Salesforce Data Model](./data-models.md#4-salesforce-data-model)
    - [Data Validation Rules](./data-models.md#data-validation-rules)
      - [Airtable Validation (Manual Enforcement)](./data-models.md#airtable-validation-manual-enforcement)
      - [Client-Side Form Validation (React Hook Form + Zod)](./data-models.md#client-side-form-validation-react-hook-form-zod)
      - [Server-Side Validation (Make.com Scenario)](./data-models.md#server-side-validation-makecom-scenario)
    - [Data Flow Summary](./data-models.md#data-flow-summary)
  - [External APIs](./external-apis.md)
    - [Overview](./external-apis.md#overview)
    - [1. Airtable API](./external-apis.md#1-airtable-api)
      - [Configuration](./external-apis.md#configuration)
      - [Error Handling](./external-apis.md#error-handling)
      - [Environment Variables](./external-apis.md#environment-variables)
    - [2. Anthropic Claude API](./external-apis.md#2-anthropic-claude-api)
      - [Configuration](./external-apis.md#configuration)
      - [Parallel Processing (Batch API)](./external-apis.md#parallel-processing-batch-api)
      - [Error Handling](./external-apis.md#error-handling)
      - [Environment Variables](./external-apis.md#environment-variables)
    - [3. Google reCAPTCHA v3 API](./external-apis.md#3-google-recaptcha-v3-api)
      - [Client-Side Implementation](./external-apis.md#client-side-implementation)
      - [Server-Side Verification (Make.com Scenario)](./external-apis.md#server-side-verification-makecom-scenario)
      - [Environment Variables](./external-apis.md#environment-variables)
    - [4. Make.com Webhook API](./external-apis.md#4-makecom-webhook-api)
      - [Client-Side POST Request](./external-apis.md#client-side-post-request)
      - [Make.com Scenario (10-Step Workflow)](./external-apis.md#makecom-scenario-10-step-workflow)
      - [Response Format](./external-apis.md#response-format)
      - [Environment Variables](./external-apis.md#environment-variables)
    - [5. Salesforce API](./external-apis.md#5-salesforce-api)
      - [Make.com Salesforce Module Configuration](./external-apis.md#makecom-salesforce-module-configuration)
      - [Error Handling (Make.com)](./external-apis.md#error-handling-makecom)
      - [Environment Variables (Make.com)](./external-apis.md#environment-variables-makecom)
    - [API Security Summary](./external-apis.md#api-security-summary)
  - [Overview](./overview.md)
  - [Component Structure](./component-structure.md)
    - [Conversion Components](./component-structure.md#conversion-components)
    - [Layout Components](./component-structure.md#layout-components)
    - [UI Primitives](./component-structure.md#ui-primitives)
  - [Component Library Strategy](./component-library-strategy.md)
  - [Component Documentation Location](./component-documentation-location.md)
  - [ADR-033: Sticky Trust Bar Implementation](./trust-bar-implementation.md)
    - [CSS Position Sticky Approach](./trust-bar-implementation.md#decision-outcome)
    - [CLS Prevention Strategy](./trust-bar-implementation.md#cls-prevention-strategy)
    - [Mobile Responsive Design](./trust-bar-implementation.md#mobile-specific-optimizations)
  - [ADR-034: Before/After Gallery Component](./gallery-implementation.md)
    - [Static Grid Implementation](./gallery-implementation.md#decision-outcome)
    - [Sharp Image Optimization](./gallery-implementation.md#image-optimization-sharp)
    - [Lazy Loading Strategy](./gallery-implementation.md#lazy-loading-implementation)
  - [ADR-035: FAQ Accordion Component](./faq-accordion-implementation.md)
    - [Native Details/Summary Element](./faq-accordion-implementation.md#decision-outcome)
    - [SEO Optimization](./faq-accordion-implementation.md#seo-optimization)
    - [Accessibility Implementation](./faq-accordion-implementation.md#accessibility-implementation)
  - [Overview](./overview.md)
  - [1. Content Creation Workflow](./1-content-creation-workflow.md)
  - [2. Build & Deployment Workflow](./2-build-deployment-workflow.md)
  - [3. Form Submission Workflow](./3-form-submission-workflow.md)
  - [ADR-027: Form Library Selection](./forms-library-selection.md)
    - [React Hook Form + Zod Decision](./forms-library-selection.md#decision-outcome)
    - [Library Comparison Analysis](./forms-library-selection.md#considered-options)
    - [Bundle Size Impact](./forms-library-selection.md#bundle-size-impact)
  - [ADR-027: Form Implementation Guide](./forms-implementation-guide.md)
    - [Three-Stage Form Pattern](./forms-implementation-guide.md#three-stage-form-implementation)
    - [Validation Schemas (Zod)](./forms-implementation-guide.md#validation-schemas)
    - [Form State Persistence (localStorage)](./forms-implementation-guide.md#form-state-persistence)
  - [Workflow Documentation](./workflow-documentation.md)
  - [Overview](./overview.md)
  - [Architecture Principles](./architecture-principles.md)
    - [1. Static-First Generation](./architecture-principles.md#1-static-first-generation)
    - [2. App Router Structure](./architecture-principles.md#2-app-router-structure)
    - [3. Server vs Client Components](./architecture-principles.md#3-server-vs-client-components)
    - [4. Data Flow](./architecture-principles.md#4-data-flow)
    - [5. Performance Optimization](./architecture-principles.md#5-performance-optimization)
    - [6. Styling Approach](./architecture-principles.md#6-styling-approach)
    - [7. Accessibility (WCAG 2.1 AA)](./architecture-principles.md#7-accessibility-wcag-21-aa)
  - [Frontend Documentation](./frontend-documentation.md)
  - [Netlify Build Plugins](./netlify-build-plugins.md)
    - [Overview](./netlify-build-plugins.md#overview)
    - [1. Lighthouse Plugin (Quality Gate)](./netlify-build-plugins.md#1-lighthouse-plugin-quality-gate)
      - [Configuration](./netlify-build-plugins.md#configuration)
      - [Performance Thresholds Explained](./netlify-build-plugins.md#performance-thresholds-explained)
      - [Lighthouse Execution Flow](./netlify-build-plugins.md#lighthouse-execution-flow)
      - [Cost Analysis](./netlify-build-plugins.md#cost-analysis)
    - [2. Cache Plugin (Build Optimization)](./netlify-build-plugins.md#2-cache-plugin-build-optimization)
      - [Configuration](./netlify-build-plugins.md#configuration)
      - [Cache Execution Flow](./netlify-build-plugins.md#cache-execution-flow)
      - [Performance Metrics](./netlify-build-plugins.md#performance-metrics)
    - [3. Why NOT Use Other Plugins](./netlify-build-plugins.md#3-why-not-use-other-plugins)
      - [‚ùå Essential Next.js Plugin](./netlify-build-plugins.md#essential-nextjs-plugin)
      - [‚ùå Image Optimization Plugin](./netlify-build-plugins.md#image-optimization-plugin)
      - [‚ùå A11y (Accessibility) Plugin](./netlify-build-plugins.md#a11y-accessibility-plugin)
    - [Complete netlify.toml Configuration](./netlify-build-plugins.md#complete-netlifytoml-configuration)
  - [ADR-011: Netlify Configuration Template](./netlify-configuration-template.md)
    - [Production-Ready netlify.toml](./netlify-configuration-template.md#complete-netlifytoml-template)
    - [Build Settings & Plugins](./netlify-configuration-template.md#build-settings)
    - [Cache Headers (CDN Optimization)](./netlify-configuration-template.md#cache-headers-cdn-optimization)
    - [Security Headers (OWASP)](./netlify-configuration-template.md#security-headers-owasp-recommended)
    - [Redirects & SEO](./netlify-configuration-template.md#redirects-seo-canonicalization)
    - [Installation & Testing](./netlify-configuration-template.md#installation-instructions)
    - [Troubleshooting Guide](./netlify-configuration-template.md#troubleshooting)
  - [Netlify Build Hooks](./netlify-build-hooks.md)
    - [Overview](./netlify-build-hooks.md#overview)
    - [1. Airtable Content Update ‚Üí Auto-Deploy](./netlify-build-hooks.md#1-airtable-content-update-auto-deploy)
      - [Setup (Step-by-Step)](./netlify-build-hooks.md#setup-step-by-step)
      - [Workflow Diagram](./netlify-build-hooks.md#workflow-diagram)
    - [2. Scheduled AI Content Refresh ‚Üí Nightly Build](./netlify-build-hooks.md#2-scheduled-ai-content-refresh-nightly-build)
      - [Setup (GitHub Actions)](./netlify-build-hooks.md#setup-github-actions)
    - [3. Emergency Rollback ‚Üí Restore Previous Deploy](./netlify-build-hooks.md#3-emergency-rollback-restore-previous-deploy)
      - [Setup](./netlify-build-hooks.md#setup)
      - [3. Multi-Client Scalability](./netlify-build-hooks.md#3-multi-client-scalability)
      - [4. Non-Technical Management](./netlify-build-hooks.md#4-non-technical-management)
      - [5. Cost Comparison (at scale)](./netlify-build-hooks.md#5-cost-comparison-at-scale)
      - [6. Development Time](./netlify-build-hooks.md#6-development-time)
    - [When Netlify Functions WOULD Be Appropriate](./netlify-build-hooks.md#when-netlify-functions-would-be-appropriate)
    - [Decision Summary](./netlify-build-hooks.md#decision-summary)
  - [Overview](./overview.md)
  - [Local Development Setup](./local-development-setup.md)
    - [1. Prerequisites](./local-development-setup.md#1-prerequisites)
    - [2. Initial Setup](./local-development-setup.md#2-initial-setup)
    - [3. Run Development Server](./local-development-setup.md#3-run-development-server)
    - [4. Build and Test](./local-development-setup.md#4-build-and-test)
  - [Git Workflow](./git-workflow.md)
    - [Branch Strategy](./git-workflow.md#branch-strategy)
    - [Feature Development Workflow](./git-workflow.md#feature-development-workflow)
    - [Pull Request Process](./git-workflow.md#pull-request-process)
    - [Merging Strategy](./git-workflow.md#merging-strategy)
  - [Deployment Workflow](./deployment-workflow.md)
    - [Automatic Deployment (Main Branch)](./deployment-workflow.md#automatic-deployment-main-branch)
    - [Manual Deployment (Netlify UI)](./deployment-workflow.md#manual-deployment-netlify-ui)
  - [Code Review Guidelines](./code-review-guidelines.md)
    - [Reviewer Responsibilities](./code-review-guidelines.md#reviewer-responsibilities)
    - [Author Responsibilities](./code-review-guidelines.md#author-responsibilities)
  - [Development Best Practices](./development-best-practices.md)
    - [1. Keep PRs Small](./development-best-practices.md#1-keep-prs-small)
    - [2. Write Descriptive Commits](./development-best-practices.md#2-write-descriptive-commits)
    - [3. Test Before Committing](./development-best-practices.md#3-test-before-committing)
    - [4. Use Feature Flags (For Large Features)](./development-best-practices.md#4-use-feature-flags-for-large-features)
  - [Overview](./overview.md)
  - [TypeScript Standards](./typescript-standards.md)
    - [1. Strict Mode Enabled](./typescript-standards.md#1-strict-mode-enabled)
    - [2. Type Definitions](./typescript-standards.md#2-type-definitions)
    - [3. No  Type](./typescript-standards.md#3-no-type)
    - [4. Const Assertions](./typescript-standards.md#4-const-assertions)
  - [React Standards](./react-standards.md)
    - [1. Server Components by Default](./react-standards.md#1-server-components-by-default)
    - [2. Component File Structure](./react-standards.md#2-component-file-structure)
    - [3. Props Interface](./react-standards.md#3-props-interface)
    - [4. Hooks Rules](./react-standards.md#4-hooks-rules)
  - [File Organization](./file-organization.md)
    - [Project Structure](./file-organization.md#project-structure)
    - [Import Order](./file-organization.md#import-order)
  - [Naming Conventions](./naming-conventions.md)
    - [Variables and Functions](./naming-conventions.md#variables-and-functions)
    - [Constants](./naming-conventions.md#constants)
    - [Components](./naming-conventions.md#components)
    - [Types and Interfaces](./naming-conventions.md#types-and-interfaces)
  - [Code Style](./code-style.md)
    - [1. Use Early Returns](./code-style.md#1-use-early-returns)
    - [2. Destructure Props](./code-style.md#2-destructure-props)
    - [3. Use Template Literals](./code-style.md#3-use-template-literals)
    - [4. Prefer  Over ](./code-style.md#4-prefer-over)
  - [Tailwind CSS Standards](./tailwind-css-standards.md)
    - [1. Class Organization](./tailwind-css-standards.md#1-class-organization)
    - [2. Use  for Conditional Classes](./tailwind-css-standards.md#2-use-for-conditional-classes)
    - [3. Extract Repeated Patterns to Components](./tailwind-css-standards.md#3-extract-repeated-patterns-to-components)
  - [Comments and Documentation](./comments-and-documentation.md)
    - [1. JSDoc for Public APIs](./comments-and-documentation.md#1-jsdoc-for-public-apis)
    - [2. Inline Comments for Complex Logic](./comments-and-documentation.md#2-inline-comments-for-complex-logic)
    - [3. TODO Comments](./comments-and-documentation.md#3-todo-comments)
  - [Overview](./overview.md)
  - [Error Handling Principles](./error-handling-principles.md)
    - [1. Fail Fast](./error-handling-principles.md#1-fail-fast)
    - [2. Graceful Degradation](./error-handling-principles.md#2-graceful-degradation)
    - [3. User-Friendly Messages](./error-handling-principles.md#3-user-friendly-messages)
  - [API Error Handling](./api-error-handling.md)
    - [Airtable API Errors](./api-error-handling.md#airtable-api-errors)
    - [Claude API Errors](./api-error-handling.md#claude-api-errors)
  - [Build-Time Error Handling](./build-time-error-handling.md)
    - [Export Script Errors](./build-time-error-handling.md#export-script-errors)
    - [Lighthouse Quality Gate Errors](./build-time-error-handling.md#lighthouse-quality-gate-errors)
  - [Runtime Error Handling](./runtime-error-handling.md)
    - [Form Submission Errors](./runtime-error-handling.md#form-submission-errors)
    - [Error Boundaries (React)](./runtime-error-handling.md#error-boundaries-react)
  - [Logging and Monitoring](./logging-and-monitoring.md)
    - [Console Logging Standards](./logging-and-monitoring.md#console-logging-standards)
    - [Error Tracking (Future)](./logging-and-monitoring.md#error-tracking-future)
  - [Error Recovery Strategies](./error-recovery-strategies.md)
    - [1. Retry with Exponential Backoff](./error-recovery-strategies.md#1-retry-with-exponential-backoff)
    - [2. Circuit Breaker (Advanced)](./error-recovery-strategies.md#2-circuit-breaker-advanced)
  - [Overview](./overview.md)
  - [Analytics and Tracking](./analytics-and-tracking.md)
    - [Google Tag Manager (GTM)](./analytics-and-tracking.md#google-tag-manager-gtm)
    - [Google Analytics 4 (GA4)](./analytics-and-tracking.md#google-analytics-4-ga4)
    - [CallRail Integration](./analytics-and-tracking.md#callrail-integration)
  - [Performance Monitoring](./performance-monitoring.md)
    - [Core Web Vitals Tracking](./performance-monitoring.md#core-web-vitals-tracking)
    - [Lighthouse CI (Build-Time Monitoring)](./performance-monitoring.md#lighthouse-ci-build-time-monitoring)
  - [Build Monitoring](./build-monitoring.md)
    - [Netlify Build Notifications](./build-monitoring.md#netlify-build-notifications)
    - [Build Time Tracking](./build-monitoring.md#build-time-tracking)
  - [Error Monitoring (Future Enhancement)](./error-monitoring-future-enhancement.md)
    - [Sentry Integration (Not in MVP)](./error-monitoring-future-enhancement.md#sentry-integration-not-in-mvp)
  - [Health Checks](./health-checks.md)
    - [Uptime Monitoring](./health-checks.md#uptime-monitoring)
    - [Synthetic Monitoring](./health-checks.md#synthetic-monitoring)
  - [Alerting Strategy](./alerting-strategy.md)
    - [Alert Levels](./alerting-strategy.md#alert-levels)
    - [Alert Channels](./alerting-strategy.md#alert-channels)
  - [Dashboards](./dashboards.md)
    - [Netlify Dashboard](./dashboards.md#netlify-dashboard)
    - [Google Analytics Dashboard](./dashboards.md#google-analytics-dashboard)
    - [Make.com Monitoring](./dashboards.md#makecom-monitoring)
  - [Overview](./overview.md)
  - [Security](./security.md)
    - [Environment Variables](./security.md#environment-variables)
    - [API Key Security](./security.md#api-key-security)
    - [Content Security](./security.md#content-security)
    - [Form Security](./security.md#form-security)
  - [Performance Optimization](./performance-optimization.md)
    - [LCP Optimization (Target: <2.5s)](./performance-optimization.md#lcp-optimization-target-25s)
    - [JavaScript Optimization](./performance-optimization.md#javascript-optimization)
    - [Image Optimization](./performance-optimization.md#image-optimization)
    - [Caching Strategy](./performance-optimization.md#caching-strategy)
    - [Build Performance](./performance-optimization.md#build-performance)
  - [ADR-031: Mobile Performance Optimization](./mobile-optimization-checklist.md)
    - [Touch Target Sizing (‚â•44px)](./mobile-optimization-checklist.md#phase-1-touch-target-sizing-wcag-21-aa)
    - [Input Type Optimization](./mobile-optimization-checklist.md#phase-2-input-type-optimization)
    - [3G/4G Testing Methodology](./mobile-optimization-checklist.md#phase-3-3g4g-testing-methodology)
    - [Responsive Breakpoints](./mobile-optimization-checklist.md#phase-4-responsive-breakpoints)
    - [Mobile-First Design Principles](./mobile-optimization-checklist.md#phase-5-mobile-first-design-principles)
    - [Performance Targets (LCP <2.5s on 3G)](./mobile-optimization-checklist.md#phase-6-mobile-performance-targets)
    - [Mobile Testing Protocol](./mobile-optimization-checklist.md#phase-7-mobile-testing-protocol)
  - [Overview](./overview.md)
  - [Testing Philosophy](./testing-philosophy.md)
  - [Testing Types](./testing-types.md)
    - [1. Type Checking (TypeScript)](./testing-types.md#1-type-checking-typescript)
    - [2. Linting (ESLint)](./testing-types.md#2-linting-eslint)
    - [3. Formatting (Prettier)](./testing-types.md#3-formatting-prettier)
    - [4. Lighthouse (Performance & Accessibility)](./testing-types.md#4-lighthouse-performance-accessibility)
    - [5. Manual Testing (MVP Approach)](./testing-types.md#5-manual-testing-mvp-approach)
    - [6. E2E Testing (Playwright - Future)](./testing-types.md#6-e2e-testing-playwright-future)
  - [ADR-019: HTML Validation Strategy](./html-validation-strategy.md)
    - [Hybrid Validation Approach](./html-validation-strategy.md#decision-outcome)
    - [html-validate (Automated CI/CD)](./html-validation-strategy.md#phase-1-automated-validation-html-validate)
    - [W3C Validator (Manual Spot-Checks)](./html-validation-strategy.md#phase-2-manual-spot-check-w3c-validator)
    - [Accessibility Validation (Axe DevTools)](./html-validation-strategy.md#phase-3-accessibility-validation-axe-devtools)
    - [Validation Rules & Error Types](./html-validation-strategy.md#validation-rules)
    - [Testing Protocol](./html-validation-strategy.md#testing-protocol)
  - [Quality Gates](./quality-gates.md)
    - [Pre-Commit Checks](./quality-gates.md#pre-commit-checks)
    - [Pre-Deploy Checks](./quality-gates.md#pre-deploy-checks)
    - [Manual QA (MVP)](./quality-gates.md#manual-qa-mvp)
  - [Test Data](./test-data.md)
    - [Sample Pages for Testing](./test-data.md#sample-pages-for-testing)
    - [Test Leads (Form Submissions)](./test-data.md#test-leads-form-submissions)
